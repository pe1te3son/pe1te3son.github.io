!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,c){c===b&&(c=0),0>c&&(c+=this.length),0>c&&(c=0);for(var d=this.length;d>c;c++)if(c in this&&this[c]===a)return c;return-1});var d=function(c,d){var e=this;this.element=a(c),this.container=d.container||"body",this.language=d.language||this.element.data("date-language")||"en",this.language=this.language in f?this.language:this.language.split("-")[0],this.language=this.language in f?this.language:"en",this.isRTL=f[this.language].rtl||!1,this.formatType=d.formatType||this.element.data("format-type")||"standard",this.format=g.parseFormat(d.format||this.element.data("date-format")||f[this.language].format||g.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=d.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=d.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=d.linkField||this.element.data("link-field")||!1,this.linkFormat=g.parseFormat(d.linkFormat||this.element.data("link-format")||g.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=d.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=d.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=d.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=d.initialDate||new Date,this.zIndex=d.zIndex||this.element.data("z-index")||b,this.title="undefined"==typeof d.title?!1:d.title,this.defaultTimeZone=(new Date).toString().split("(")[1].slice(0,-1),this.timezone=d.timezone||this.defaultTimeZone,this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.clickedOutside=function(b){0===a(b.target).closest(".datetimepicker").length&&e.hide()},this.formatViewType="datetime","formatViewType"in d?this.formatViewType=d.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in d?this.minView=d.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=g.convertViewMode(this.minView),this.maxView=g.modes.length-1,"maxView"in d?this.maxView=d.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=g.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in d?this.wheelViewModeNavigation=d.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in d?this.wheelViewModeNavigationInverseDirection=d.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in d?this.wheelViewModeNavigationDelay=d.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in d?this.startViewMode=d.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=g.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in d?this.viewSelect=d.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=g.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in d?this.forceParse=d.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var h=3===this.bootcssVer?g.templateV3:g.template;-1!==h.indexOf("{iconType}");)h=h.replace("{iconType}",this.icontype);for(;-1!==h.indexOf("{leftArrow}");)h=h.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==h.indexOf("{rightArrow}");)h=h.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=a(h).appendTo(this.isInline?this.element:this.container).on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(a.fn.mousewheel?this.picker.on({mousewheel:a.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var i=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(i).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}a(document).on("mousedown",this.clickedOutside),this.autoclose=!1,"autoclose"in d?this.autoclose=d.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in d?this.keyboardNavigation=d.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=d.todayBtn||this.element.data("date-today-btn")||!1,this.clearBtn=d.clearBtn||this.element.data("date-clear-btn")||!1,this.todayHighlight=d.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(d.weekStart||this.element.data("date-weekstart")||f[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.datesDisabled=[],this.daysOfWeekDisabled=[],this.setStartDate(d.startDate||this.element.data("date-startdate")),this.setEndDate(d.endDate||this.element.data("date-enddate")),this.setDatesDisabled(d.datesDisabled||this.element.data("date-dates-disabled")),this.setDaysOfWeekDisabled(d.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(d.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(d.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};d.prototype={constructor:d,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:a.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b,c,d=0;d<this._events.length;d++)b=this._events[d][0],c=this._events[d][1],b.on(c)},_detachEvents:function(){for(var a,b,c=0;c<this._events.length;c++)a=this._events[c][0],b=this._events[c][1],a.off(b);this._events=[]},show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(b){this.isVisible&&(this.isInline||(this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),a(document).off("mousedown",this.clickedOutside),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},getInitialDate:function(){return this.initialDate},setInitialDate:function(a){this.initialDate=a},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){a>=this.startDate&&a<=this.endDate?(this.date=a,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:a,startDate:this.startDate,endDate:this.endDate})},setFormat:function(a){this.format=g.parseFormat(a,this.formatType);var b;this.isInput?b=this.element:this.component&&(b=this.element.find("input")),b&&b.val()&&this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):(this.component&&this.element.find("input").val(b),this.element.data("date",b)),this.linkField&&a("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(a){return a==b&&(a=this.format),g.formatDate(this.date,a,this.language,this.formatType,this.timezone)},setStartDate:function(a){this.startDate=a||-(1/0),this.startDate!==-(1/0)&&(this.startDate=g.parseDate(this.startDate,this.format,this.language,this.formatType,this.timezone)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||1/0,this.endDate!==1/0&&(this.endDate=g.parseDate(this.endDate,this.format,this.language,this.formatType,this.timezone)),this.update(),this.updateNavArrows()},setDatesDisabled:function(b){this.datesDisabled=b||[],a.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/)),this.datesDisabled=a.map(this.datesDisabled,function(a){return g.parseDate(a,this.format,this.language,this.formatType,this.timezone).toDateString()}),this.update(),this.updateNavArrows()},setTitle:function(a,b){return this.picker.find(a).find("th:eq(1)").text(this.title===!1?b:this.title)},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[],a.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(b){this.minutesDisabled=b||[],a.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=a.map(this.minutesDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(b){this.hoursDisabled=b||[],a.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=a.map(this.hoursDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var b=0;a("div").each(function(){var c=parseInt(a(this).css("zIndex"),10);c>b&&(b=c)}),this.zIndex=b+10}var c,d,e,f;f=this.container instanceof a?this.container.offset():a(this.container).offset(),this.component?(c=this.component.offset(),e=c.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(e+=this.component.outerWidth()-this.picker.outerWidth())):(c=this.element.offset(),e=c.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(e+=this.element.outerWidth()-this.picker.outerWidth()));var g=document.body.clientWidth||window.innerWidth;e+220>g&&(e=g-220),d="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?c.top-this.picker.outerHeight():c.top+this.height,d-=f.top,e-=f.left,this.picker.css({top:d,left:e,zIndex:this.zIndex})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,("string"==typeof a||a instanceof String)&&(a=a.replace(/^\s+|\s+$/g,""))),a||(a=new Date,b=!1),this.date=g.parseDate(a,this.format,this.language,this.formatType,this.timezone),b&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+f[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datetimepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+f[this.language].monthsShort[b++]+"</span>";this.picker.find(".datetimepicker-months td").html(a)},fill:function(){if(null!=this.date&&null!=this.viewDate){var b=new Date(this.viewDate),d=b.getUTCFullYear(),e=b.getUTCMonth(),h=b.getUTCDate(),i=b.getUTCHours(),j=b.getUTCMinutes(),k=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),l=this.startDate!==-(1/0)?this.startDate.getUTCMonth():-(1/0),m=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,n=this.endDate!==1/0?this.endDate.getUTCMonth()+1:1/0,o=new c(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),p=new Date;if(this.setTitle(".datetimepicker-days",f[this.language].months[e]+" "+d),"time"==this.formatViewType){var q=this.getFormattedDate();this.setTitle(".datetimepicker-hours",q),this.setTitle(".datetimepicker-minutes",q)}else this.setTitle(".datetimepicker-hours",h+" "+f[this.language].months[e]+" "+d),this.setTitle(".datetimepicker-minutes",h+" "+f[this.language].months[e]+" "+d);this.picker.find("tfoot th.today").text(f[this.language].today||f.en.today).toggle(this.todayBtn!==!1),this.picker.find("tfoot th.clear").text(f[this.language].clear||f.en.clear).toggle(this.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var r=c(d,e-1,28,0,0,0,0),s=g.getDaysInMonth(r.getUTCFullYear(),r.getUTCMonth());r.setUTCDate(s),r.setUTCDate(s-(r.getUTCDay()-this.weekStart+7)%7);var t=new Date(r);t.setUTCDate(t.getUTCDate()+42),t=t.valueOf();for(var u,v=[];r.valueOf()<t;)r.getUTCDay()==this.weekStart&&v.push("<tr>"),u="",r.getUTCFullYear()<d||r.getUTCFullYear()==d&&r.getUTCMonth()<e?u+=" old":(r.getUTCFullYear()>d||r.getUTCFullYear()==d&&r.getUTCMonth()>e)&&(u+=" new"),this.todayHighlight&&r.getUTCFullYear()==p.getFullYear()&&r.getUTCMonth()==p.getMonth()&&r.getUTCDate()==p.getDate()&&(u+=" today"),r.valueOf()==o&&(u+=" active"),(r.valueOf()+864e5<=this.startDate||r.valueOf()>this.endDate||-1!==a.inArray(r.getUTCDay(),this.daysOfWeekDisabled)||-1!==a.inArray(r.toDateString(),this.datesDisabled))&&(u+=" disabled"),v.push('<td class="day'+u+'">'+r.getUTCDate()+"</td>"),r.getUTCDay()==this.weekEnd&&v.push("</tr>"),r.setUTCDate(r.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(v.join("")),v=[];for(var w="",x="",y="",z=this.hoursDisabled||[],A=0;24>A;A++)if(-1===z.indexOf(A)){var B=c(d,e,h,A);u="",B.valueOf()+36e5<=this.startDate||B.valueOf()>this.endDate?u+=" disabled":i==A&&(u+=" active"),this.showMeridian&&2==f[this.language].meridiem.length?(x=12>A?f[this.language].meridiem[0]:f[this.language].meridiem[1],x!=y&&(""!=y&&v.push("</fieldset>"),v.push('<fieldset class="hour"><legend>'+x.toUpperCase()+"</legend>")),y=x,w=A%12?A%12:12,v.push('<span class="hour'+u+" hour_"+(12>A?"am":"pm")+'">'+w+"</span>"),23==A&&v.push("</fieldset>")):(w=A+":00",v.push('<span class="hour'+u+'">'+w+"</span>"))}this.picker.find(".datetimepicker-hours td").html(v.join("")),v=[],w="",x="",y="";for(var C=this.minutesDisabled||[],A=0;60>A;A+=this.minuteStep)if(-1===C.indexOf(A)){var B=c(d,e,h,i,A,0);u="",B.valueOf()<this.startDate||B.valueOf()>this.endDate?u+=" disabled":Math.floor(j/this.minuteStep)==Math.floor(A/this.minuteStep)&&(u+=" active"),this.showMeridian&&2==f[this.language].meridiem.length?(x=12>i?f[this.language].meridiem[0]:f[this.language].meridiem[1],x!=y&&(""!=y&&v.push("</fieldset>"),v.push('<fieldset class="minute"><legend>'+x.toUpperCase()+"</legend>")),y=x,w=i%12?i%12:12,v.push('<span class="minute'+u+'">'+w+":"+(10>A?"0"+A:A)+"</span>"),59==A&&v.push("</fieldset>")):(w=A+":00",v.push('<span class="minute'+u+'">'+i+":"+(10>A?"0"+A:A)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(v.join(""));var D=this.date.getUTCFullYear(),E=this.setTitle(".datetimepicker-months",d).end().find("span").removeClass("active");if(D==d){var F=E.length-12;E.eq(this.date.getUTCMonth()+F).addClass("active")}(k>d||d>m)&&E.addClass("disabled"),d==k&&E.slice(0,l).addClass("disabled"),d==m&&E.slice(n).addClass("disabled"),v="",d=10*parseInt(d/10,10);var G=this.setTitle(".datetimepicker-years",d+"-"+(d+9)).end().find("td");d-=1;for(var A=-1;11>A;A++)v+='<span class="year'+(-1==A||10==A?" old":"")+(D==d?" active":"")+(k>d||d>m?" disabled":"")+'">'+d+"</span>",d+=1;G.html(v),this.place()}},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),e=a.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()&&e<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()&&e>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(b){if(b.preventDefault(),b.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var c=b.originalEvent,d=c.wheelDelta,e=d>0?1:0===d?0:-1;this.wheelViewModeNavigationInverseDirection&&(e=-e),this.showMode(e),setTimeout(a.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(b){b.stopPropagation(),b.preventDefault();var d=a(b.target).closest("span, td, th, legend");if(d.is("."+this.icontype)&&(d=a(d).parent().closest("span, td, th, legend")),1==d.length){if(d.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var e=g.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,e);break;case 1:this.viewDate=this.moveDate(this.viewDate,e);break;case 2:this.viewDate=this.moveMonth(this.viewDate,e);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,e)}this.fill(),this.element.trigger({type:d[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset(),this.autoclose&&this.hide();break;case"today":var f=new Date;f=c(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),0),f<this.startDate?f=this.startDate:f>this.endDate&&(f=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(f),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){var h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),j=this.viewDate.getUTCDate(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();if(d.is(".month")?(this.viewDate.setUTCDate(1),i=d.parent().find("span").index(d),j=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(c(h,i,j,k,l,m,0))):d.is(".year")?(this.viewDate.setUTCDate(1),h=parseInt(d.text(),10)||0,this.viewDate.setUTCFullYear(h),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(c(h,i,j,k,l,m,0))):d.is(".hour")?(k=parseInt(d.text(),10)||0,(d.hasClass("hour_am")||d.hasClass("hour_pm"))&&(12==k&&d.hasClass("hour_am")?k=0:12!=k&&d.hasClass("hour_pm")&&(k+=12)),this.viewDate.setUTCHours(k),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(c(h,i,j,k,l,m,0))):d.is(".minute")&&(l=parseInt(d.text().substr(d.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(l),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(c(h,i,j,k,l,m,0))),0!=this.viewMode){var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var j=parseInt(d.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();d.is(".old")?0===i?(i=11,h-=1):i-=1:d.is(".new")&&(11==i?(i=0,h+=1):i+=1),this.viewDate.setUTCFullYear(h),this.viewDate.setUTCMonth(i,j),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(c(h,i,j,k,l,m,0))}var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(a,b){b&&"date"!=b||(this.date=a),b&&"view"!=b||(this.viewDate=a),this.fill(),this.setValue();var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),this.autoclose&&(!b||"date"==b)),this.element.trigger({type:"changeDate",date:this.getDate()}),null==a&&(this.date=this.viewDate)},moveMinute:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCMinutes(c.getUTCMinutes()+b*this.minuteStep),c},moveHour:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCHours(c.getUTCHours()+b),c},moveDate:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCDate(c.getUTCDate()+b),c},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;b=37==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,b),d=this.moveDate(this.viewDate,b)):1==viewMode?(c=this.moveHour(this.date,b),d=this.moveHour(this.viewDate,b)):0==viewMode&&(c=this.moveMinute(this.date,b),d=this.moveMinute(this.viewDate,b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;b=38==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,7*b),d=this.moveDate(this.viewDate,7*b)):1==viewMode?this.showMeridian?(c=this.moveHour(this.date,6*b),d=this.moveHour(this.viewDate,6*b)):(c=this.moveHour(this.date,4*b),d=this.moveHour(this.viewDate,4*b)):0==viewMode&&(c=this.moveMinute(this.date,4*b),d=this.moveMinute(this.viewDate,4*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:if(0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();a.preventDefault();break;case 9:this.hide()}if(e){var g;this.isInput?g=this.element:this.component&&(g=this.element.find("input")),g&&g.change(),this.element.trigger({type:"changeDate",date:this.getDate()})}},showMode:function(a){if(a){var b=Math.max(0,Math.min(g.modes.length-1,this.viewMode+a));b>=this.minView&&b<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:b}),this.viewMode=b)}this.picker.find(">div").hide().filter(".datetimepicker-"+g.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(a){this._setDate(null,"date")},convertViewModeText:function(a){switch(a){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var e=a.fn.datetimepicker;a.fn.datetimepicker=function(c){var e=Array.apply(null,arguments);e.shift();var f;return this.each(function(){var g=a(this),h=g.data("datetimepicker"),i="object"==typeof c&&c;return h||g.data("datetimepicker",h=new d(this,a.extend({},a.fn.datetimepicker.defaults,i))),"string"==typeof c&&"function"==typeof h[c]&&(f=h[c].apply(h,e),f!==b)?!1:void 0}),f!==b?f:this},a.fn.datetimepicker.defaults={},a.fn.datetimepicker.Constructor=d;var f=a.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"}},g={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,g.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getDefaultFormat:function(a,b){if("standard"==a)return"input"==b?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==a)return"input"==b?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(a){if("standard"==a)return/t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==a)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(a,b){var c=a.replace(this.validParts(b),"\x00").split("\x00"),d=a.match(this.validParts(b));if(!c||!c.length||!d||0==d.length)throw new Error("Invalid date format.");return{separators:c,parts:d}},parseDate:function(b,e,g,h,i){if(b instanceof Date){var j=new Date(b.valueOf()-6e4*b.getTimezoneOffset());return j.setMilliseconds(0),j}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(b)&&(e=this.parseFormat("yyyy-mm-dd",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(b)&&(e=this.parseFormat("yyyy-mm-dd hh:ii",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(b)&&(e=this.parseFormat("yyyy-mm-dd hh:ii:ss",h)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(b)){var k,l,m=/([-+]\d+)([dmwy])/,n=b.match(/([-+]\d+)([dmwy])/g);b=new Date;for(var o=0;o<n.length;o++)switch(k=m.exec(n[o]),l=parseInt(k[1]),k[2]){case"d":b.setUTCDate(b.getUTCDate()+l);break;case"m":b=d.prototype.moveMonth.call(d.prototype,b,l);break;case"w":b.setUTCDate(b.getUTCDate()+7*l);break;case"y":b=d.prototype.moveYear.call(d.prototype,b,l)}return c(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),0)}var p,q,k,n=b&&b.toString().match(this.nonpunctuation)||[],b=new Date(0,0,0,0,0,0,0),r={},s=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P","z","Z"],t={hh:function(a,b){return a.setUTCHours(b)},h:function(a,b){return a.setUTCHours(b)},HH:function(a,b){return a.setUTCHours(12==b?0:b)},H:function(a,b){return a.setUTCHours(12==b?0:b)},ii:function(a,b){return a.setUTCMinutes(b)},i:function(a,b){return a.setUTCMinutes(b)},ss:function(a,b){return a.setUTCSeconds(b)},s:function(a,b){return a.setUTCSeconds(b)},yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;){if(isNaN(a.getUTCMonth()))return a;a.setUTCDate(a.getUTCDate()-1)}return a},d:function(a,b){return a.setUTCDate(b)},p:function(a,b){return a.setUTCHours(1==b?a.getUTCHours()+12:a.getUTCHours())},z:function(){return i}};if(t.M=t.MM=t.mm=t.m,t.dd=t.d,t.P=t.p,t.Z=t.z,b=c(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),n.length==e.parts.length){for(var o=0,u=e.parts.length;u>o;o++){if(p=parseInt(n[o],10),k=e.parts[o],isNaN(p))switch(k){case"MM":q=a(f[g].months).filter(function(){var a=this.slice(0,n[o].length),b=n[o].slice(0,a.length);return a==b}),p=a.inArray(q[0],f[g].months)+1;break;case"M":q=a(f[g].monthsShort).filter(function(){var a=this.slice(0,n[o].length),b=n[o].slice(0,a.length);return a.toLowerCase()==b.toLowerCase()}),p=a.inArray(q[0],f[g].monthsShort)+1;break;case"p":case"P":p=a.inArray(n[o].toLowerCase(),f[g].meridiem);break;case"z":case"Z":}
r[k]=p}for(var v,o=0;o<s.length;o++)v=s[o],v in r&&!isNaN(r[v])&&t[v](b,r[v])}return b},formatDate:function(b,c,d,e,h){if(null==b)return"";var i;if("standard"==e)i={t:b.getTime(),yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear(),m:b.getUTCMonth()+1,M:f[d].monthsShort[b.getUTCMonth()],MM:f[d].months[b.getUTCMonth()],d:b.getUTCDate(),D:f[d].daysShort[b.getUTCDay()],DD:f[d].days[b.getUTCDay()],p:2==f[d].meridiem.length?f[d].meridiem[b.getUTCHours()<12?0:1]:"",h:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds(),z:h},2==f[d].meridiem.length?i.H=i.h%12==0?12:i.h%12:i.H=i.h,i.HH=(i.H<10?"0":"")+i.H,i.P=i.p.toUpperCase(),i.Z=i.z,i.hh=(i.h<10?"0":"")+i.h,i.ii=(i.i<10?"0":"")+i.i,i.ss=(i.s<10?"0":"")+i.s,i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m;else{if("php"!=e)throw new Error("Invalid format type.");i={y:b.getUTCFullYear().toString().substring(2),Y:b.getUTCFullYear(),F:f[d].months[b.getUTCMonth()],M:f[d].monthsShort[b.getUTCMonth()],n:b.getUTCMonth()+1,t:g.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth()),j:b.getUTCDate(),l:f[d].days[b.getUTCDay()],D:f[d].daysShort[b.getUTCDay()],w:b.getUTCDay(),N:0==b.getUTCDay()?7:b.getUTCDay(),S:b.getUTCDate()%10<=f[d].suffix.length?f[d].suffix[b.getUTCDate()%10-1]:"",a:2==f[d].meridiem.length?f[d].meridiem[b.getUTCHours()<12?0:1]:"",g:b.getUTCHours()%12==0?12:b.getUTCHours()%12,G:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},i.m=(i.n<10?"0":"")+i.n,i.d=(i.j<10?"0":"")+i.j,i.A=i.a.toString().toUpperCase(),i.h=(i.g<10?"0":"")+i.g,i.H=(i.G<10?"0":"")+i.G,i.i=(i.i<10?"0":"")+i.i,i.s=(i.s<10?"0":"")+i.s}for(var b=[],j=a.extend([],c.separators),k=0,l=c.parts.length;l>k;k++)j.length&&b.push(j.shift()),b.push(i[c.parts[k]]);return j.length&&b.push(j.shift()),b.join("")},convertViewMode:function(a){switch(a){case 4:case"decade":a=4;break;case 3:case"year":a=3;break;case 2:case"month":a=2;break;case 1:case"day":a=1;break;case 0:case"hour":a=0}return a},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{iconType} {rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>",g.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+g.headTemplateV3+g.contTemplate+g.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+g.headTemplateV3+g.contTemplate+g.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+g.headTemplateV3+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+g.headTemplateV3+g.contTemplate+g.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+g.headTemplateV3+g.contTemplate+g.footTemplate+"</table></div></div>",a.fn.datetimepicker.DPGlobal=g,a.fn.datetimepicker.noConflict=function(){return a.fn.datetimepicker=e,this},a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(b){var c=a(this);c.data("datetimepicker")||(b.preventDefault(),c.datetimepicker("show"))}),a(function(){a('[data-provide="datetimepicker-inline"]').datetimepicker()})}),angular.module("eventPlannerApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngSanitize","ngTouch","ui.router","firebase"]).run(["$rootScope","$state","FirebaseService",function(a,b,c){c.auth().$getAuth()?b.go("user",{userId:c.auth().$getAuth().uid}).then(function(){b.go("allEvents")}):b.go("login"),a.$on("$stateChangeStart",function(){$(".page-loading").removeClass("hidden")}),a.$on("$stateChangeSuccess",function(){$(".page-loading").addClass("hidden")})}]).config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginCtrl as currentUser",resolve:{currentAuth:["FirebaseService",function(a){var b=a.auth();return b.$waitForAuth()}]}}).state("register",{url:"/register",templateUrl:"views/login.html",controller:"LoginCtrl as currentUser",resolve:{currentAuth:["FirebaseService",function(a){var b=a.auth();return b.$waitForAuth()}]}}).state("user",{url:"/:userId",templateUrl:"views/user.html",controller:"ControlpanelCtrl as user",redirectTo:"user.allEvents",resolve:{currentAuth:["FirebaseService",function(a){var b=a.auth();return b.$waitForAuth()}]}}).state("addEventForm",{url:"/add-new",templateUrl:"views/user.addFormView.html",controller:"AddeventformCtrl as form",parent:"user",resolve:{currentAuth:["FirebaseService",function(a){var b=a.auth();return b.$waitForAuth()}]}}).state("allEvents",{url:"/events",templateUrl:"views/user.allevents.html",controller:"AlleventsCtrl as events",parent:"user",resolve:{getEvents:["FirebaseService",function(a){var b=a.array("/events");return b.$loaded()}]}})}]),angular.module("eventPlannerApp").controller("ControlpanelCtrl",["FirebaseService","$state","currentAuth",function(a,b,c){var d=this;c||b.go("login"),this.auth=a.auth(),this.logOut=function(){d.auth.$unauth(),b.go("login")}}]),angular.module("eventPlannerApp").controller("AddeventformCtrl",["FirebaseService","$state","currentAuth",function(a,b,c){c?this.collection=a.array("/events"):b.go("login");var d=this;this.eventDefault=function(){return{name:"",category:"",startDate:"",startTime:"",endDate:"",endTime:"",host:"",guests:[],eventLocation:""}},this.event=this.eventDefault(),this.tempLocation="",this.addEvent=function(){d.event.startDate=moment(d.selectedStartDate).format("YYYY-MM-DD"),d.event.startTime=moment(d.selectedStartDate).format("HH:mm"),d.event.endDate=moment(d.selectedEndDate).format("YYYY-MM-DD"),d.event.endTime=moment(d.selectedEndDate).format("HH:mm"),d.collection.$add(d.event)},this.setDatetime=function(){var a=moment().format("YYYY-MM-DD HH:mm");return a},this.fillStartDateInput=function(){d.selectedStartDate=d.setDatetime(),$("#start-date").datetimepicker({format:"yyyy/mm/dd hh:ii",startDate:d.setDatetime()})},this.fillEndDateInput=function(){d.selectedEndDate=d.selectedStartDate||d.setDatetime(),$("#end-date").datetimepicker({format:"yyyy/mm/dd hh:ii",startDate:d.selectedEndDate})},this.guestsRequired=!1,this.guestDuplicate=!1,this.isNotValid=!1,this.submit=function(a){d.event.guests.length&&a?(d.addEvent(),b.reload()):d.isNotValid=!0,d.event.guests.length||(d.guestsRequired=!0)},this.addGuest=function(a){for(var b=!1,c=0;c<d.event.guests.length&&!b;c++)d.guest===d.event.guests[c]&&(b=!0);(13===a.which||"click"===a)&&(b?b&&(d.guestDuplicate=!0):(d.guestsRequired=!1,d.guestDuplicate=!1,d.event.guests.push(d.guest),d.guest=""))},this.removeGuest=function(a){d.event.guests.splice(a,1)},this.componentForm={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"long_name",postal_code:"short_name"},this.geolocate=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){var b={lat:a.coords.latitude,lng:a.coords.longitude},c=new google.maps.Circle({center:b,radius:a.coords.accuracy});d.autocomplete.setBounds(c.getBounds())})},this.fillInAddress=function(){var a=d.autocomplete.getPlace();d.event.eventLocation={};for(var b=0;b<a.address_components.length;b++){var c=a.address_components[b].types[0];if(d.componentForm[c]){var e=a.address_components[b][d.componentForm[c]];d.event.eventLocation[c]=e}}},this.initAutocomplete=function(){d.autocomplete=new google.maps.places.Autocomplete(document.getElementById("autocomplete"),{types:["geocode"]}),d.geolocate(),d.autocomplete.addListener("place_changed",d.fillInAddress)}}]),angular.module("eventPlannerApp").controller("AlleventsCtrl",["FirebaseService","getEvents",function(a,b){var c=this;this.allEvents=b,this.remove=function(a){c.allEvents.$remove(a)},this.select=function(a){this.selected===a?this.selected=null:this.selected=a},this.isActive=function(a){return this.selected===a},this.formatDate=function(a){return moment(a,"YYYY-MM-DD").format("Do MMM YYYY")}}]),angular.module("eventPlannerApp").controller("LoginCtrl",["FirebaseService","$state","$stateParams","$rootScope",function(a,b,c,d){var e=this;this.sc=d,this.$state=b.current.name,this.rememberMe=!0,this.spinner=!1,this.invalidPassword=!1,this.invalidUser=!1,this.invalidPassword=!1,this.logInError=!1,this.regSuccess=!1,this.emailTaken=!1,this.registerFailed=!1,this.regError="",this.details={name:"",email:"",password:"",confirmPassword:""},this.rememberMeFunc=function(a){return a?"default":"sessionOnly"},this.userLoggedIn=function(a){b.go("user",{userId:a}).then(function(){b.go("allEvents")})},this.loginUser=function(b){b&&(e.spinner=!0,a.auth().$authWithPassword({email:e.details.email,password:e.details.password},{remember:e.rememberMeFunc(e.rememberMe)}).then(function(a){console.log(a),e.userLoggedIn(a.uid),e.spinner=!1})["catch"](function(a){switch(a.code){case"INVALID_PASSWORD":console.log("The specified user account or password is incorrect."),e.invalidPassword=!0,e.details.password="";break;case"INVALID_USER":console.log("The specified user account does not exist."),e.invalidUser=!0;break;default:e.logInError=!0}e.spinner=!1}))},this.registerUser=function(b){b&&(e.spinner=!0,a.auth().$createUser({email:e.details.email,password:e.details.password}).then(function(b){console.log("User created with uid: "+b.uid),$("#loginForm").slideUp("fast"),e.regSuccess=!0;var c=a.obj(b.uid);c.userDetails={name:e.details.name},c.$save()})["catch"](function(a){console.log(a),"EMAIL_TAKEN"===a.code?e.emailTaken=!0:(e.regError=""+a+".",e.registerFailed=!0),e.spinner=!1}))}}]),angular.module("eventPlannerApp").service("FirebaseService",["$firebaseAuth","$firebaseArray","$firebaseObject",function(a,b,c){this.link="https://event-planner-janak.firebaseio.com/",this.auth=function(){var b=new Firebase(this.link);return a(b)},this.userUid=function(){var a=this.auth().$getAuth().uid;return a},this.array=function(a){var c=new Firebase(this.link+this.userUid()+a);return b(c)},this.obj=function(a){var b=new Firebase(this.link);return c(b.child(a))}}]),angular.module("eventPlannerApp").directive("cuLabel",function(){return{restrict:"A",link:function(a,b){b.change(function(){var a=b.parent().find("label");b.val().length&&a.addClass("label-animated")}),b.on("focus",function(){var a=b.parent().find("label");a.hasClass("label-animated-off")&&a.removeClass("label-animated-off"),a.addClass("label-animated highlight")}),b.on("blur",function(){var a=b.parent().find("label");b.val().length||(a.removeClass("label-animated"),a.addClass("label-animated-off")),a.removeClass("highlight")})}}}),angular.module("eventPlannerApp").directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b===a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}),angular.module("eventPlannerApp").directive("autofocus",["$timeout",function(a){return{restrict:"A",link:function(b,c){a(function(){c[0].focus()})}}}]),angular.module("eventPlannerApp").run(["$templateCache",function(a){"use strict";a.put("views/login.html",'<div class="container-fluid"> <div class="row"> <div class="header col-xs-12 text-center"> <h1 class="site-title">Event Planer</h1> </div> </div> <div class="row"> <div class="forms-cont col-xs-12"> <div class="form-belt"> <div class="form-switch-btns"> <button ui-sref="login" class="login-btn-select" type="button" ng-class="{ \'active-form-btn\': currentUser.$state==\'login\' }">Log in</button> <button ui-sref="register" class="login-btn-select" type="button" ng-class="{ \'active-form-btn\': currentUser.$state==\'register\' }">Register</button> </div> <form name="loginForm" class="text-left login-form animated fadeIn" id="loginForm" novalidate> <div class="form-group form-label-animated" ng-if="currentUser.$state == \'register\'" ng-class="loginForm.name.$invalid && loginForm.name.$dirty ? \'error-msg-input\' : \'\' "> <label class="label-default-pos" for="user-name">Your name</label> <input type="text" class="form-control event-input" name="name" id="user-name" ng-model="currentUser.details.name" ng-minlength="1" autocomplete="name" cu-label autofocus required> <div ng-messages="loginForm.name.$error" ng-if="loginForm.name.$dirty"> <div ng-messages-include="views/messages.html"></div> </div> </div> <div class="form-group form-label-animated" ng-class="loginForm.email.$invalid && loginForm.email.$dirty ? \'error-msg-input\' : \'\' "> <label class="label-default-pos" for="user-email">Email address</label> <input type="email" class="form-control event-input" id="user-email" name="email" ng-model="currentUser.details.email" autocomplete="email" cu-label autofocus required> <div ng-messages="loginForm.email.$error" ng-if="loginForm.email.$dirty"> <div ng-messages-include="views/messages.html"></div> </div> </div> <div class="form-group form-label-animated" ng-class="loginForm.userPassword.$invalid && loginForm.userPassword.$dirty && currentUser.$state != \'login\' ? \'error-msg-input\' : \'\' "> <label class="label-default-pos" for="user-password">Password</label> <input type="password" class="form-control event-input" id="user-password" name="userPassword" ng-model="currentUser.details.password" ng-pattern="/^.*(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).*$/" ng-minlength="8" cu-label required> <div ng-messages="loginForm.userPassword.$error" ng-if="loginForm.userPassword.$dirty && currentUser.$state != \'login\'"> <div ng-messages-include="views/messages.html"></div> </div> </div> <div class="form-group form-label-animated" ng-if="currentUser.$state == \'register\'" ng-class="loginForm.confirmPassword.$invalid && loginForm.confirmPassword.$dirty ? \'error-msg-input\' : \'\' "> <label class="label-default-pos" for="user-confirm-password">Confirm password</label> <input type="password" class="form-control event-input" id="user-confirm-password" name="confirmPassword" ng-model="currentUser.details.confirmPassword" compare-to="currentUser.details.password" cu-label required> <div ng-messages="loginForm.confirmPassword.$error" ng-if="loginForm.confirmPassword.$dirty"> <div ng-messages-include="views/messages.html"></div> </div> </div> <div class="general-msg-cont text-center"> <span class="error-msg error-block" ng-show="currentUser.logInError">Failed to login! Please try later or reload the page.</span> <span class="error-msg error-block" ng-show="currentUser.emailTaken">The new user account cannot be created because the specified email address is already in use.</span> <span class="error-msg error-block">{{currentUser.regError}}</span> <span class="error-msg error-block" ng-show="currentUser.invalidPassword">The specified user account or password is incorrect.</span> <span class="error-msg error-block" ng-show="currentUser.invalidUser">The specified user account does not exist.</span> </div> <div class="checkbox" ng-if="currentUser.$state == \'login\'"> <label> <input type="checkbox" ng-model="currentUser.rememberMe"> Remember me </label> </div> <button type="submit" class="btn btn-custom" ng-if="currentUser.$state == \'login\'" ng-click="currentUser.loginUser(loginForm.$valid)">Sign in</button> <button type="submit" class="btn btn-custom" ng-if="currentUser.$state == \'register\'" ng-click="currentUser.registerUser(loginForm.$valid)">Register</button> <div class="login-spinner-cont" ng-show="currentUser.spinner"> <i class="fa fa-spinner fa-spin fa-fw"></i> <span class="sr-only">Loading...</span> </div> </form> <p class="text-center reg-success" ng-show="currentUser.regSuccess">Registration successfull. Please <a ui-sref="login">login</a> with your email and password.</p> </div> <!-- /form-belt --> </div> </div><!-- /row --> </div><!-- /container -->'),a.put("views/messages.html",'<span class="error-msg error-block" ng-message="required">You can`t leave this empty!</span> <span class="error-msg error-block" ng-message="minlength">Password should have at least 8 characters!</span> <span class="error-msg error-block" ng-message="pattern">Must contain at least one uppercase letter and digit!</span> <span class="error-msg error-block" ng-message="compareTo">Passwords do not match!</span> <span class="error-msg error-block" ng-message="email">Incorrect email address! (example@provider.com)</span>'),a.put("views/user.addFormView.html",'<div class="col-xs-12"> <form name="addEventForm" id="add-event-form" class="css-form" novalidate> <div class="custom-input-group"> <div class="form-group form-label-animated" ng-class="addEventForm.eventName.$invalid && addEventForm.eventName.$dirty ? \'error-msg-input\' : \'\' "> <i class="fa fa-book label-icon" aria-hidden="true"></i> <label class="label-default-pos" for="event-name">Event Name</label> <input type="text" class="form-control event-input" id="event-name" name="eventName" ng-model="form.event.name" cu-label required autofocus> <div ng-messages="addEventForm.eventName.$error" ng-if="addEventForm.eventName.$dirty || form.isNotValid"> <div ng-messages-include="views/messages.html"></div> </div> </div> <fieldset class="form-group form-label-animated"> <i class="fa fa-list-ul label-icon" aria-hidden="true"></i> <label class="label-default-pos" for="category" style="width:80%">Select category</label> <input list="selectCategory" id="category" name="eventCategory" class="form-control event-input" ng-model="form.event.category" cu-label required> <div ng-messages="addEventForm.eventCategory.$error" ng-if="addEventForm.eventCategory.$dirty || form.isNotValid"> <div ng-messages-include="views/messages.html"></div> </div> <datalist id="selectCategory"> <option value="Party"></option> <option value="Meeting"></option> <option value="Important"></option> </datalist> </fieldset> <div class="form-group form-label-animated"> <i class="fa fa-play label-icon" aria-hidden="true"></i> <label class="label-default-pos cover" for="start-date">Start date</label> <input type="text" class="form-control event-input" id="start-date" ng-model="form.selectedStartDate" name="selectedStartDate" ng-focus="form.fillStartDateInput()" ng-change="form.updateEndDate()" required cu-label> <div ng-messages="addEventForm.selectedStartDate.$error" ng-if="addEventForm.selectedStartDate.$dirty || form.isNotValid"> <div ng-messages-include="views/messages.html"></div> </div> </div> <div class="form-group form-label-animated"> <i class="fa fa-stop-circle label-icon" aria-hidden="true"></i> <label class="label-default-pos cover" for="end-date">End date</label> <input type="text" name="selectedEndDate" class="form-control event-input" id="end-date" ng-model="form.selectedEndDate" ng-focus="form.fillEndDateInput()" required cu-label> <div ng-messages="addEventForm.selectedEndDate.$error" ng-if="addEventForm.selectedEndDate.$dirty || form.isNotValid"> <div ng-messages-include="views/messages.html"></div> </div> </div> </div><!-- /custom-input-group --> <div class="custom-input-group"> <div class="form-group form-label-animated"> <i class="fa fa-map-marker label-icon" aria-hidden="true"></i> <label class="label-default-pos" for="autocomplete">Location</label> <input type="text" name="eventLocation" id="autocomplete" class="form-control event-input" ng-focus="form.initAutocomplete()" ng-model="form.tempLocation" placeholder="" cu-label required> <div ng-messages="addEventForm.eventLocation.$error" ng-if="addEventForm.eventLocation.$dirty || form.isNotValid"> <div ng-messages-include="views/messages.html"></div> </div> </div> <div class="form-group form-label-animated"> <i class="fa fa-user label-icon" aria-hidden="true"></i> <label class="label-default-pos" for="event-host">Event host</label> <input class="form-control event-input" type="text" name="eventHost" id="event-host" ng-model="form.event.host" cu-label required> <div ng-messages="addEventForm.eventHost.$error" ng-if="addEventForm.eventHost.$dirty || form.isNotValid"> <div ng-messages-include="views/messages.html"></div> </div> </div> <div class="form-group form-label-animated no-margin"> <i class="fa fa-users label-icon" aria-hidden="true"></i> <label class="label-default-pos" for="event-guests">Event guests</label> <button type="button" name="addGuest" id="add-guest-btn" ng-show="form.guest.length > 0" ng-click="form.addGuest(\'click\')">Add</button> <input class="form-control event-input" type="text" name="eventGuests" id="event-guests" ng-model="form.guest" ng-keypress="form.addGuest($event)" cu-label> <span class="error-msg error-block" ng-show="form.guestsRequired">At least one guest required.</span> <span class="error-msg error-block" ng-show="form.guestDuplicate">Guest already on the list.</span> </div> <div class="guests-cont"> <span ng-repeat="guest in form.event.guests" class="guest" ng-click="form.removeGuest($index)">{{guest}}</span> </div> </div><!-- /custom-input-group --> <div class="custom-input-group"> <div class="form-group form-label-animated"> <i class="fa fa-info-circle textarea-icon" aria-hidden="true"></i> <label class="textarea-label" for="optional-info">Additional information</label> <textarea class="form-textarea" id="optional-info" rows="3" ng-model="form.event.additionalInfo"></textarea> </div> </div><!-- /custom-input-group --> <div class="text-right"> <button type="button" class="btn btn-custom" ng-click="form.submit(addEventForm.$valid)">Add new</button> <!-- <i class="fa fa-plus-circle btn-icon" aria-hidden="true"></i> --> </div> </form> </div> <!-- /col-xs-12 -->'),a.put("views/user.allevents.html",'<section class="col-sm-10 col-xs-12 all-events-section"> <ul class="event-list"> <li class="sn-event" ng-repeat="event in events.allEvents track by $id(event)" ng-click="events.select(event)"> <div class="sn-cont"> <div class="sn-header sn-line"> <h4 class="sn-name">{{event.name}}</h4> <i class="fa fa-trash sn-remove-btn" aria-hidden="true" ng-click="events.remove(event)"></i> </div> <div class="sn-body col-xs-12"> <div class="sn-line col-xs-12"> <p class="sn-cat"><i class="fa fa-list-ul" aria-hidden="true"></i><em class="sn-cat-name">&nbsp;Category:&nbsp;</em>{{event.category}}</p> </div> <div class="sn-date-cont sn-line col-xs-12"> <span class="sn-date"><em class="sn-cat-name">Begins:&nbsp;</em>{{events.formatDate(event.startDate)}}&nbsp;<em class="sn-cat-name">at:&nbsp;</em>{{event.startTime}}</span> <span class="sn-date"><em class="sn-cat-name">Ends:&nbsp;</em>{{events.formatDate(event.endDate)}}&nbsp;<em class="sn-cat-name">at:&nbsp;</em>{{event.endTime}}</span> </div> <div class="sn-extend sn-extend-hide col-xs-12" ng-class="{\'sn-selected\': events.isActive(event)}"> <div class="sn-holder col-sm-6 col-xs-12"> <div class="sn-line"> <em class="sn-cat-name">Host:&nbsp;</em><span class="sn-host">{{event.host}}</span> </div> <div class="sn-event-guests sn-line"> <p><em class="sn-cat-name">Guests:&nbsp;</em></p> <span class="sn-guest" ng-repeat="guest in event.guests">{{guest}}</span> </div> </div> <div class="sn-holder col-sm-6 col-xs-12"> <div class="sn-event-location sn-line"> <i class="fa fa-map-marker" aria-hidden="true"></i> <em class="sn-cat-name">Address:</em> <div class="sn-address-line"> <span class="sn-street-number">{{event.eventLocation.street_number}}</span> <span class="sn-street">{{event.eventLocation.route}}</span> </div> <div class="sn-address-line"> <span class="sn-city">{{event.eventLocation.locality}}</span> <span class="sn-postcode">{{event.eventLocation.postal_code}}</span> </div> </div> </div> <div class="sn-holder col-xs-12" style="margin-top:20px"> <div class="sn-line" ng-show="event.additionalInfo.length > 0"> <em class="sn-info sn-cat-name">Additional info:</em> <p>{{event.additionalInfo}}</p> </div> </div> </div><!-- /sn-extend --> </div><!-- /sn-body --> </div><!-- /sn-cont --> </li> </ul> </section>'),a.put("views/user.html",'<nav class="side-panel"> <ul class="list-unstyled text-center"> <li class="nav-item"><button class="side-panel-btn" ui-sref-active="active-side-btn" ui-sref="addEventForm" id="add-event" type="button">New</button></li> <li class="nav-item"><button class="side-panel-btn" ui-sref-active="active-side-btn" ui-sref="allEvents" id="display-events" type="button">Events</button></li> <li class="nav-item"><button class="side-panel-btn" type="button" ng-click="user.logOut()" id="logout-btn"><i class="fa fa-sign-out" aria-hidden="true"></i></button></li> </ul> </nav> <div class="header-loggedin"> <h1 class="site-title">Event Planner</h1> </div> <div class="container page-wrapper"> <div ui-view class="row user-section view"></div> </div>')}]);